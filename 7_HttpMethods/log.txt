const http=require("http");
const fs=require("fs");
const url=require("url");


// ye poora path ka details  bata deta hai 
//like kaunsa aprt kya hai 
const myServer=http.createServer((req,res)=>{
    if(req.url==='/favicon.ico')
        return res.end();

    const req1=`${req.method}: ${req.url}\n`;
    const myUrl=url.parse(req.url,true);
    console.log(myUrl);
    
    fs.appendFile("log.txt",req1,(err,data)=>{
    switch(myUrl.pathname)
    {
    case '/':res.end("Home Page");
    break;
    case '/about': 
    const username=myUrl.query.myname;
    res.end(`hi , ${username}`);
   // res.end("piyush garg");
    break;

    case '/search':
        const search =myUrl.query.search_query;
        res.end("here are your results for: "+search);
        break;
    
    case 'signup':
        if(req.method==="Get")res.end("THis is signUP Form);
        else if(req.method==="POST")
    default:
        res.end("404");
    }
    })
 
})

myServer.listen(8000,()=>console.log("Everything OK"));